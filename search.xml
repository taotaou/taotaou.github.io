<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Python抓取网站图片</title>
      <link href="2020/11/30/python-zhuang-shi-qi/"/>
      <url>2020/11/30/python-zhuang-shi-qi/</url>
      
        <content type="html"><![CDATA[<p>爬取图片作为爬虫的入门还是很容易就可以实现的，简单的爬虫只需要十几行，这篇我会分为三个部分详细的介绍如何实现，学会可以考虑请博主喝一杯冰阔落哈哈哈。</p><h2 id="1-网页分析"><a href="#1-网页分析" class="headerlink" title="1.网页分析"></a>1.网页分析</h2><h3 id="网页部分"><a href="#网页部分" class="headerlink" title="网页部分"></a>网页部分</h3><p>首先打开的是我经常使用的一个 <a href="http://www.yestone.com/gallery/1501754333627">图片网站</a><br></br><br><img src="https://taogege.xyz/medias/pic_data/11/30_1.png"></br><br>找到其中一个图片在源码的位置，如下<br></br><br><img src="https://taogege.xyz/medias/pic_data/11/30_4.png"><br></br><br>然后可以分析得出图片板块被藏在了class=”vue-waterfall-slot” 的div下边，而我需要的到图片的src,这样就需要更深层的挖掘，打开其中一个图片的div<br></br><br><img src="https://taogege.xyz/medias/pic_data/11/30_2.png"><br></br><br>这样就找到了图片的src</p><h2 id="代码实现和效果呈现"><a href="#代码实现和效果呈现" class="headerlink" title="代码实现和效果呈现"></a>代码实现和效果呈现</h2><p>接下来就是代码的实现，代码很简单具体的我已经在后边做好了注释</p><pre class="line-numbers language-bash"><code class="language-bash">from bs4 <span class="token function">import</span> BeautifulSoupfrom PIL <span class="token function">import</span> Imagefrom io <span class="token function">import</span> BytesIO<span class="token function">import</span> os<span class="token function">import</span> <span class="token function">time</span><span class="token function">import</span> requests<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash"><code class="language-bash">def url_get <span class="token punctuation">(</span>url<span class="token punctuation">)</span>:    headers <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;"User-Agent": "Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36"&amp;#125;</span>    r <span class="token operator">=</span> requests.get<span class="token punctuation">(</span>url, headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>    soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>r.content, <span class="token string">'html.parser'</span><span class="token punctuation">)</span>    items <span class="token operator">=</span> soup.find_all<span class="token punctuation">(</span><span class="token string">'div'</span>,class_<span class="token operator">=</span><span class="token string">'vue-waterfall-slot'</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#获取HTML里边图片所在的div</span>    folder_path <span class="token operator">=</span> <span class="token string">'./photo'</span> <span class="token comment" spellcheck="true">#图片保存的文件夹</span>    <span class="token keyword">if</span> os.path.exists<span class="token punctuation">(</span>folder_path<span class="token punctuation">)</span> <span class="token operator">==</span> False:       os.makedirs<span class="token punctuation">(</span>folder_path<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash"><code class="language-bash">    <span class="token keyword">for</span> index, item <span class="token keyword">in</span> enumerate<span class="token punctuation">(</span>items<span class="token punctuation">)</span>:<span class="token comment" spellcheck="true">#enumerate是相当于将items里边的数据列举出来进行迭代</span>        <span class="token keyword">if</span> item:            html <span class="token operator">=</span> requests.get<span class="token punctuation">(</span>item.find<span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span>.get<span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">))</span> <span class="token comment" spellcheck="true">#获取items div 里边的图片src</span>            img_name <span class="token operator">=</span> folder_path + str<span class="token punctuation">(</span>index + 1<span class="token punctuation">)</span> + <span class="token string">'.png'</span> <span class="token comment" spellcheck="true">#设置保存图片的名字</span>            image <span class="token operator">=</span> Image.open<span class="token punctuation">(</span>BytesIO<span class="token punctuation">(</span>html.content<span class="token punctuation">))</span><span class="token comment" spellcheck="true">#用字节流的方式传输</span>            image.save<span class="token punctuation">(</span><span class="token string">'这里是图片保存的路径'</span>+img_name<span class="token punctuation">)</span>            print<span class="token punctuation">(</span><span class="token string">'第%d张图片下载完成'</span> % <span class="token punctuation">(</span>index + 1<span class="token punctuation">))</span>            time.sleep<span class="token punctuation">(</span>1<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># 自定义延时,防止程序崩掉</span>    print<span class="token punctuation">(</span><span class="token string">'抓取完成'</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span><span class="token string">'__main__'</span><span class="token keyword">:</span>    url <span class="token operator">=</span> <span class="token string">"http://www.yestone.com/gallery/1501754333627"</span>    url_get<span class="token punctuation">(</span>url<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>效果如下：</br><img src="https://taogege.xyz/medias/pic_data/11/30_3.png"></p>]]></content>
      
      
      <categories>
          
          <category> 爬虫 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="2020/11/12/hello-world/"/>
      <url>2020/11/12/hello-world/</url>
      
        <content type="html"><![CDATA[<p>历时两周终于将个人主页搭建好了，具体详细教程有时间再详细整理整理单独发出来，至于这篇，写过程序的都知道hello world 是什么意思哈哈哈哈，作为留念就不删掉了。</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class="line-numbers language-bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class="line-numbers language-bash"><code class="language-bash">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class="line-numbers language-bash"><code class="language-bash">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class="line-numbers language-bash"><code class="language-bash">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
